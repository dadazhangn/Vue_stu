<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://unpkg.com/vue@3"></script>
    <title>响应式编程</title>
</head>
<body>
    
</body>
<script>
    // let a = 1;
    // let b = 2;
    // let sum = a + b;
    // console.log(sum);
    // a = 4;
    // b = 5;
    // console.log(sum);

    // 定义对象数据
<<<<<<< HEAD
    // let a = {
    //     value: 1
    // };
    // let b = {
    //     value: 2
    // };
    // // 定义处理器
    // handleA = {
    //     get(target, prop) {
    //         console.log(`获取A: ${prop}的值`);
    //         return target[prop]
    //     },
    //     set(target, prop, value) {
    //         console.log(`设置A: ${prop}的值为${value}`);   
    //     }
    // }
    // handleB = {
    //     get(target, prop) {
    //         console.log(`获取B: ${prop}的值`);
    //         return target[prop]
    //     },
    //     set(target, prop, value) {
    //         console.log(`设置B: ${prop}的值为${value}`);   
    //     }
    // }
    
    // let pa = new Proxy(a, handleA)
    // let pb = new Proxy(b, handleB)
    // let sum = pa.value + pb.value;
    // pa.value = 3;
    // pb.value = 4;
    
    // 数据对象
=======
>>>>>>> 8b4eb9d4d6385709bb612f9997d72d3172be023a
    let a = {
        value: 1
    };
    let b = {
        value: 2
    };
<<<<<<< HEAD
    // 定义触发器用于刷新数据
    let trigger = null;
    // 数据变量的处理器，当数据变化时，调用触发器刷新
    handleA = {
        set(target, prop, value) {
            target[prop] = value;
            if (trigger) {
                trigger();
            }
        }
    }
    handleB = {
        set(target, prop, value) {
            target[prop] = value;
            if (trigger) {
                trigger();
            }
        }
    }
    // 进行对象的代理包装
    let pa = new Proxy(a, handleA);
    let pb = new Proxy(b, handleB);
    let sum = 0;
    // 实现触发器逻辑
    trigger = () => {
        sum = pa.value + pb.value;
    }
    trigger();
    console.log(sum);
    pa.value = 3;
    pb.value = 4;
    console.log(sum);
    
    


=======
    // 定义处理器
    handleA = {
        get(target, prop) {
            console.log(`获取A: ${prop}的值`);
            return target[prop]
        },
        set(target, prop, value) {
            console.log(`设置A: ${prop}的值为${value}`);   
        }
    }
    handleB = {
        get(target, prop) {
            console.log(`获取B: ${prop}的值`);
            return target[prop]
        },
        set(target, prop, value) {
            console.log(`设置B: ${prop}的值为${value}`);   
        }
    }
    
    let pa = new Proxy(a, handleA)
    let pb = new Proxy(b, handleB)
    let sum = pa.value + pb.value;
    pa.value = 3;
    pb.value = 4;
    
>>>>>>> 8b4eb9d4d6385709bb612f9997d72d3172be023a
</script>
</html>