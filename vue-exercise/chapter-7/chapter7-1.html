<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://unpkg.com/vue@3"></script>
    <title>响应式编程</title>
</head>
<body>
    
</body>
<script>
    // let a = 1;
    // let b = 2;
    // let sum = a + b;
    // console.log(sum);
    // a = 4;
    // b = 5;
    // console.log(sum);

    // 定义对象数据

    // let a = {
    //     value: 1
    // };
    // let b = {
    //     value: 2
    // };
    // // 定义处理器
    // handleA = {
    //     get(target, prop) {
    //         console.log(`获取A: ${prop}的值`);
    //         return target[prop]
    //     },
    //     set(target, prop, value) {
    //         console.log(`设置A: ${prop}的值为${value}`);   
    //     }
    // }
    // handleB = {
    //     get(target, prop) {
    //         console.log(`获取B: ${prop}的值`);
    //         return target[prop]
    //     },
    //     set(target, prop, value) {
    //         console.log(`设置B: ${prop}的值为${value}`);   
    //     }
    // }
    
    // let pa = new Proxy(a, handleA)
    // let pb = new Proxy(b, handleB)
    // let sum = pa.value + pb.value;
    // pa.value = 3;
    // pb.value = 4;
    
    // 数据对象

    // let a = {
    //     value: 1
    // };
    // let b = {
    //     value: 2
    // };

    // // 定义触发器用于刷新数据
    // let trigger = null;
    // // 数据变量的处理器，当数据变化时，调用触发器刷新
    // handleA = {
    //     set(target, prop, value) {
    //         target[prop] = value;
    //         if (trigger) {
    //             trigger();
    //         }
    //     }
    // }
    // handleB = {
    //     set(target, prop, value) {
    //         target[prop] = value;
    //         if (trigger) {
    //             trigger();
    //         }
    //     }
    // }
    // // 进行对象的代理包装
    // let pa = new Proxy(a, handleA);
    // let pb = new Proxy(b, handleB);
    // let sum = 0;
    // // 实现触发器逻辑
    // trigger = () => {
    //     sum = pa.value + pb.value;
    // }
    // trigger();
    // console.log(sum);
    // pa.value = 3;
    // pb.value = 4;
    // console.log(sum);
    
       // 定义处理器
    //    handleA = {
    //     get(target, prop) {
    //         console.log(`获取A: ${prop}的值`);
    //         return target[prop]
    //     },
    //     set(target, prop, value) {
    //         console.log(`设置A: ${prop}的值为${value}`);   
    //     }
    // }
    // handleB = {
    //     get(target, prop) {
    //         console.log(`获取B: ${prop}的值`);
    //         return target[prop]
    //     },
    //     set(target, prop, value) {
    //         console.log(`设置B: ${prop}的值为${value}`);   
    //     }
    // }
    
    // let pa = new Proxy(a, handleA)
    // let pb = new Proxy(b, handleB)
    // let sum = pa.value + pb.value;
    // pa.value = 3;
    // pb.value = 4;


    // const App = Vue.createApp({
    //     setup() {
    //         let a = Vue.ref(1);
    //         Vue.watchEffect(() => {
    //             // 当a变化时，执行当前函数
    //             console.log("a变化了"); 
    //             a.value += 1;
    //         })
    //         // 手动停止监听
    //         stop();
    //         a.value = 2;
    //         return {
    //             a
    //         }
    //     }
    // })

    // const App = Vue.createApp({
    //     setup() {
    //         let a = Vue.reactive({
    //             data: 0
    //         });
    //         let b = Vue.ref(0);
    //         Vue.watch(()=> {
    //             // 监听a对象的data属性变化
    //             return a.data
    //         }, (value, old) => {
    //             // 新旧值都可以获取
    //             console.log(`新值: ${value}, 旧值: ${old}`);
    //         })
    //         a.data = 1;
    //         // 可以直接监听ref对象
    //         Vue.watch(b, (value, old) => {
    //               // 新旧值都可以获取
    //               console.log(`新值: ${value}, 旧值: ${old}`);
    //         })
    //         b.value = 3;

    //     },
    //     template: `<h1>测试数据: {{sum}}</h1>`
    // })

    // APP.mount('#Application');

    // const App = Vue.createApp({
    //     setup() {
    //         let a = Vue.reactive({
    //             data: 0
    //         });
    //         let b = Vue.ref(0);
    //       Vue.watch([() => {
    //         // 监听a对象的data属性变化
    //         return a.data
    //       }, b], ([valueA, valueB], [oldA, oldB])=> {
    //         // 新旧值都可以获取
    //         console.log(`新值: ${valueA}, 旧值: ${oldA}`);
    //         console.log(`新值: ${valueB}, 旧值: ${oldB}`);
    //       })
    //     },
    //     template: `<h1>测试数据: {{sum}}</h1>`
    // })


    

</script>
</html>